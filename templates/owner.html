{% extends "layout.html" %}

{% block content %}
<h2>Tables owned by {{ name }} ({{ name|owner }})</h2>
<table class="table table-striped table-condensed table-bordered tablesort">
  <thead>
    <tr>
      <th>Server</th>
      <th>Schema</th>
      <th>Table</th>
      <th data-sort-method="number" data-sort-default>Size</th>
      <th data-sort-method="number">Rows</th>
    </tr>
  </thead>
  <tbody>
    {% for r in usage|sort(attribute='host') %}
    <tr>
      <td>{{ r.host }}</td>
      <td>{{ r.table_schema }}</td>
      <td>{{ r.table_name }}</td>
      <td class="number" data-sort="{{ r.total_bytes }}">{{ r.total_bytes|filesizeformat }}</td>
      <td class="number">{{ r.row_count|int }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}

{% block js %}
{{ super() }}
<script src="https://tools-static.wmflabs.org/cdnjs/ajax/libs/tablesort/5.0.0/tablesort.min.js"></script>
<script src="https://tools-static.wmflabs.org/cdnjs/ajax/libs/tablesort/5.0.0/src/sorts/tablesort.number.js"></script>
<script>
  $(document).ready(function() {
    $('table.tablesort').each(function(idx, elm) {
      new Tablesort(elm, {descending: true});
    });
  });
</script>
{% endblock %}
{# vim:sw=2:ts=2:sts=2:et: #}
